# üöÄ –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ AuraFlora Bot

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env
–°–∫–æ–ø–∏—Ä—É–π `.env` —Å –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä–∞ –∏–ª–∏ —Å–æ–∑–¥–∞–π –ª–æ–∫–∞–ª—å–Ω—ã–π —Å —Ç–µ–º–∏ –∂–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏.

### 3. –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
```bash
./run_local.sh
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ngrok –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è webhook'–æ–≤
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ngrok
brew install ngrok

# –ó–∞–ø—É—Å–∫ —Ç—É–Ω–Ω–µ–ª—è
ngrok http 8080
```

### 5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ webhook URL –≤ Meta Developer Console
1. –°–∫–æ–ø–∏—Ä—É–π ngrok URL (–Ω–∞–ø—Ä–∏–º–µ—Ä, `https://abc123.ngrok.io`)
2. –ü–µ—Ä–µ–π–¥–∏ –≤ [Meta Developer Console](https://developers.facebook.com/apps/[YOUR_APP_ID]/whatsapp-business/wa-dev-console)
3. –û–±–Ω–æ–≤–∏ Webhook URL –Ω–∞: `https://abc123.ngrok.io/webhook`
4. Verify Token –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å `VERIFY_TOKEN` –≤ `.env`

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

### –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ webhook URL
```bash
# –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π ngrok
./switch_webhook.sh local

# –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω
./switch_webhook.sh prod
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è API
```bash
# –õ–æ–∫–∞–ª—å–Ω—ã–π healthcheck
curl http://localhost:8080/health

# –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π healthcheck
curl http://localhost:8080/health/full
```

## –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏
–õ–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –≤—ã–≤–æ–¥–∏—Ç –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª—å —Å —É—Ä–æ–≤–Ω–µ–º DEBUG.

### Debug –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
–ü—Ä–∏ `DEV_MODE=true` –¥–æ—Å—Ç—É–ø–µ–Ω debug –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
- http://localhost:8080/debug

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ webhook'–æ–≤
```bash
# –¢–µ—Å—Ç –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ webhook
curl "http://localhost:8080/webhook?hub.mode=subscribe&hub.challenge=test&hub.verify_token=YOUR_TOKEN"

# –¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è (POST)
curl -X POST http://localhost:8080/webhook \
  -H "Content-Type: application/json" \
  -d '{"object":"whatsapp_business_account","entry":[{"id":"123","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"1234567890","phone_number_id":"123"},"contacts":[{"profile":{"name":"Test"},"wa_id":"1234567890"}],"messages":[{"from":"1234567890","id":"msg_123","timestamp":"1234567890","text":{"body":"test"}}]}}]}]}'
```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–î–æ–±–∞–≤—å –≤ `.env`:
```bash
LOCAL_DEV=true
ENVIRONMENT=development
DEV_MODE=true
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

‚úÖ **–ë—ã—Å—Ç—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞** - –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ  
‚úÖ **–û—Ç–ª–∞–¥–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** - –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏  
‚úÖ **–ü–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** - –≤—Å–µ API —Ä–∞–±–æ—Ç–∞—é—Ç –ª–æ–∫–∞–ª—å–Ω–æ  
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ –≤–ª–∏—è–Ω–∏—è –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω  
‚úÖ **–≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏** - –Ω–µ –Ω—É–∂–Ω–æ –¥–µ–ø–ª–æ–∏—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è  

## –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω

–ö–æ–≥–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞:
1. –ó–∞–ø—É—Å—Ç–∏ `./switch_webhook.sh prod`
2. –û–±–Ω–æ–≤–∏ webhook URL –≤ Meta Developer Console
3. –î–µ–ø–ª–æ–π: `./deploy.sh` 